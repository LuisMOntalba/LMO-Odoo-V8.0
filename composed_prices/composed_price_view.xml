<?xml version="1.0" encoding="utf-8"?>
<openerp>
	<data>
			
		<menuitem
			id="menu_composed_price_1"
			name="Composed prices"
			parent="base.menu_purchase_root"
			sequence="0" />
		
		<record id="composed_price_view_tree" model="ir.ui.view">
			<field name="name">composed.price.view.tree</field>
        <field name="model">composed.price</field>
        <field name="arch" type="xml">
					<tree>
						<field name="parent_id" />
						<field name="product_tmpl_id"/>
						<field name="brother_id"/>
            <field name="product_qty"/>
						<field name="standard_price" string="Purchase price"/>
            <field name="unit_cost" string="Unit cost"/>
            <field name="subtotal_cost" string="Subtotal"/>
            <field name="composed_cost" string="Composed price"/>
          </tree>
        </field>
		</record>
		<act_window
			id="action_composed_price"
			name="Prices lines"
			res_model="composed.price"
			view_mode="tree,form" />
		<menuitem
			id="composed_prices.menu_composed_price_2"
      name="Composed prices lines"
      parent="composed_prices.menu_composed_price_1"
      sequence="30"
      action="composed_prices.action_composed_price" />
	
		<record id="composed_price_view_tree_s" model="ir.ui.view">
			<field name="name">composed.price.view.tree.s</field>
        <field name="model">composed.price</field>
        <field name="field_parent">child_ids</field>
        <field name="arch" type="xml">
					<tree>
						<field name="parent_id" invisible="1" />
						<field name="product_tmpl_id"/>
						<field name="brother_id"/>
            <field name="product_qty"/>
						<field name="standard_price" string="Purchase price"/>
            <field name="unit_cost" string="Unit cost"/>
            <field name="subtotal_cost" string="Subtotal"/>
            <field name="composed_cost" string="Composed price"/>
					</tree>
        </field>
		</record>
		<record id="action_composed_price_s" model="ir.actions.act_window">
				<field name="name">Structured prices</field>
				<field name="res_model">composed.price</field>
				<field name="view_type">tree</field>
				<field name="view_id" ref="composed_price_view_tree_s"/>
				<field name="domain">[('parent_id','=',False)]</field>
		</record>
		<menuitem
			id="composed_prices.menu_composed_price_3"
      name="Structured prices"
      parent="composed_prices.menu_composed_price_1"
      sequence="20"
      action="composed_prices.action_composed_price_s" />

		<record id="composed_price_view_form" model="ir.ui.view">
        <field name="name">composed.price.view.form</field>
        <field name="model">composed.price</field>
        <field name="arch" type="xml">
					<form>
						<sheet>
              <group name="group_top" string="Product">
								<field name="product_tmpl_id"/>
								<field name="parent_id"/>
              </group>
              <group name="group_mid" string="Costs">
								<group name="group_left">
									<field name="standard_price" string="Purchase price"/>
                </group>
								<group name="group_right">
									<field name="composed_cost" string="Composed price"/>
                </group>
              </group>
              <group name="group_bottom">
									<field name="child_ids" widget="one2many_list">
										<tree string="Components" editable="bottom">
											<field name="product_tmpl_id"/>
											<field name="brother_id"/>
                      <field name="product_qty"/>
                      <field name="standard_price" string="Purchase price"/>
                      <field name="unit_cost" string="Unit cost"/>
                      <field name="subtotal_cost" string="Subtotal"/>
										</tree>
									</field>
              </group>
            </sheet>
					</form>
        </field>
			</record>
		
	</data>
</openerp>
